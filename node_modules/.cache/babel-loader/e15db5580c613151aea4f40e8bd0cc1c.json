{"ast":null,"code":"var _jsxFileName = \"/home/christoph/Desktop/xdemo/src/components/Wrapper.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, setState } from \"react\";\nimport \"./Wrapper.css\";\nimport Card from \"./Card\";\nimport Bottom from \"./Bottom\";\nimport data from \"../data.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst computedFeatures = {\n  nrOfLikeComputations: 0,\n  nrOfDislikeComputations: 0,\n  avgLiked: [0, 0],\n  avgDisliked: [0, 0]\n};\n\nconst Wrapper = () => {\n  _s();\n\n  const [products, setProducts] = useState(data);\n  const [superlikedProducts, setSuperlikedProducts] = useState([]);\n  const [likedProducts, setLikedProducts] = useState([]);\n  const [dislikedProducts, setDislikedProducts] = useState([]);\n  const [displayedProduct, setDisplayedProduct] = useState(0);\n\n  const handleChoice = (id, action) => {\n    console.log(computedFeatures.avgLiked);\n    console.log(computedFeatures.avgDisliked);\n    console.log(id);\n\n    switch (action) {\n      case \"ADD_TO_LIKED_PRODUCTS\":\n        let nr = computedFeatures.nrOfLikeComputations;\n        let selectedProduct = products.filter(product => product.id === id);\n        let x = selectedProduct[0].features[0];\n        let y = selectedProduct[0].features[1];\n        let newLikedX = nr / (nr + 1) * computedFeatures.avgLiked[0] + 1 / (nr + 1) * x;\n        let newLikedY = nr / (nr + 1) * computedFeatures.avgLiked[1] + 1 / (nr + 1) * y;\n        setLikedProducts([...likedProducts], selectedProduct[0]);\n        let cleanProducts = products.filter(product => product.id != id);\n        setProducts(cleanProducts);\n        let minDist = 1000;\n        let minIdx = 0;\n\n        for (let i = 0; i < cleanProducts.length; i++) {\n          let runningDist = (cleanProducts[i].features[0] - newLikedX) ** 2 + (cleanProducts[i].features[1] - newLikedY) ** 2;\n\n          if (computedFeatures.avgDisliked[0] != 0 && computedFeatures.avgDisliked[1] != 0) {\n            runningDist += -1 * (cleanProducts[i].features[0] - computedFeatures.avgDisliked[0]) ** 2;\n            runningDist += -1 * (cleanProducts[i].features[1] - computedFeatures.avgDisliked[1]) ** 2;\n          }\n\n          if (runningDist < minDist) {\n            minDist = runningDist;\n            minIdx = i;\n          }\n        }\n\n        computedFeatures.nrOfLikeComputations = nr + 1;\n        computedFeatures.avgLiked = [newLikedX, newLikedY];\n        setDisplayedProduct(cleanProducts[minIdx].id);\n        console.log(computedFeatures);\n        break;\n\n      case \"ADD_TO_DISLIKED_PRODUCTS\":\n        let nrDL = computedFeatures.nrOfDislikeComputations;\n        let selectedProductDL = products.filter(product => product.id === id);\n        let xDL = selectedProductDL[0].features[0];\n        let yDL = selectedProductDL[0].features[1];\n        let newLikedXDL = nrDL / (nrDL + 1) * computedFeatures.avgDisliked[0] + 1 / (nrDL + 1) * xDL;\n        let newLikedYDL = nrDL / (nrDL + 1) * computedFeatures.avgDisliked[1] + 1 / (nrDL + 1) * yDL;\n        setLikedProducts([...dislikedProducts], selectedProductDL[0]);\n        let cleanProductsDL = products.filter(product => product.id != id);\n        setProducts(cleanProductsDL);\n        let minDistDL = 1000;\n        let minIdxDL = 0;\n\n        for (let i = 0; i < cleanProductsDL.length; i++) {\n          let runningDistDL = (cleanProductsDL[i].features[0] - computedFeatures.avgLiked[0]) ** 2 + (cleanProductsDL[i].features[1] - computedFeatures.avgLiked[1]) ** 2;\n\n          if (computedFeatures.avgDisliked[0] != 0 && computedFeatures.avgDisliked[1] != 0) {\n            runningDistDL += -1 * (cleanProductsDL[i].features[0] - computedFeatures.avgDisliked[0]) ** 2;\n            runningDistDL += -1 * (cleanProductsDL[i].features[1] - computedFeatures.avgDisliked[1]) ** 2;\n          } else {\n            computedFeatures.avgDisliked[0] = newLikedXDL;\n            computedFeatures.avgDisliked[1] = newLikedYDL;\n          }\n\n          if (runningDistDL < minDistDL) {\n            minDistDL = runningDistDL;\n            minIdxDL = i;\n          }\n        }\n\n        computedFeatures.nrOfDislikeComputations = nrDL + 1;\n        computedFeatures.avgDisliked = [newLikedXDL, newLikedYDL];\n        setDisplayedProduct(cleanProductsDL[minIdxDL].id);\n        break;\n\n      case \"ADD_TO_SUPERLIKED_PRODUCTS\":\n        // newLiked = (nr/(nr+3))*avgLiked + (3/(nr+3))*productFeats\n        // setlikedProducts = newLiked\n        // nrOfLikeComputations = +1\n        let nrSL = computedFeatures.nrOfLikeComputations;\n        let selectedProductSL = products.filter(product => product.id === id);\n        let xSL = selectedProductSL[0].features[0];\n        let ySL = selectedProductSL[0].features[1];\n        let newLikedXSL = nrSL / (nrSL + 3) * computedFeatures.avgLiked[0] + 3 / (nrSL + 3) * xSL;\n        let newLikedYSL = nrSL / (nrSL + 3) * computedFeatures.avgLiked[1] + 3 / (nrSL + 3) * ySL;\n        setLikedProducts([...likedProducts], selectedProductSL[0]);\n        let cleanProductsSL = products.filter(product => product.id != id);\n        setProducts(cleanProductsSL);\n        let minDistSL = 1000;\n        let minIdxSL = 0;\n\n        for (let i = 0; i < cleanProductsSL.length; i++) {\n          let runningDistSL = (cleanProductsSL[i].features[0] - newLikedXSL) ** 2 + (cleanProductsSL[i].features[1] - newLikedYSL) ** 2;\n\n          if (computedFeatures.avgLiked[0] != 0 && computedFeatures.avgLiked[1] != 0) {\n            runningDistSL += -1 * (cleanProductsSL[i].features[0] - computedFeatures.avgLiked[0]) ** 2;\n            runningDistSL += -1 * (cleanProductsSL[i].features[1] - computedFeatures.avgLiked[1]) ** 2;\n          }\n\n          if (runningDistSL < minDistSL) {\n            minDistSL = runningDistSL;\n            minIdxSL = i;\n          }\n        }\n\n        computedFeatures.nrOfLikedComputations = nrSL + 1;\n        computedFeatures.avgLiked = [newLikedXSL, newLikedYSL];\n        setDisplayedProduct(cleanProductsSL[minIdxSL].id);\n        break;\n\n      default:\n        return null;\n      //people;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"outer-wrap\",\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      id: displayedProduct,\n      handleChoice: handleChoice\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Bottom, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Wrapper, \"Kj/fkq7nZBeU7vQbMeGZufhKSt8=\");\n\n_c = Wrapper;\nexport default Wrapper;\n\nvar _c;\n\n$RefreshReg$(_c, \"Wrapper\");","map":{"version":3,"sources":["/home/christoph/Desktop/xdemo/src/components/Wrapper.js"],"names":["React","useState","setState","Card","Bottom","data","computedFeatures","nrOfLikeComputations","nrOfDislikeComputations","avgLiked","avgDisliked","Wrapper","products","setProducts","superlikedProducts","setSuperlikedProducts","likedProducts","setLikedProducts","dislikedProducts","setDislikedProducts","displayedProduct","setDisplayedProduct","handleChoice","id","action","console","log","nr","selectedProduct","filter","product","x","features","y","newLikedX","newLikedY","cleanProducts","minDist","minIdx","i","length","runningDist","nrDL","selectedProductDL","xDL","yDL","newLikedXDL","newLikedYDL","cleanProductsDL","minDistDL","minIdxDL","runningDistDL","nrSL","selectedProductSL","xSL","ySL","newLikedXSL","newLikedYSL","cleanProductsSL","minDistSL","minIdxSL","runningDistSL","nrOfLikedComputations"],"mappings":"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","sourcesContent":["import React, { useState, setState } from \"react\";\nimport \"./Wrapper.css\";\nimport Card from \"./Card\";\nimport Bottom from \"./Bottom\";\nimport data from \"../data.json\";\n\nconst computedFeatures = {\n  nrOfLikeComputations: 0,\n  nrOfDislikeComputations: 0,\n  avgLiked: [0, 0],\n  avgDisliked: [0, 0],\n};\n\nconst Wrapper = () => {\n  const [products, setProducts] = useState(data);\n  const [superlikedProducts, setSuperlikedProducts] = useState([]);\n  const [likedProducts, setLikedProducts] = useState([]);\n  const [dislikedProducts, setDislikedProducts] = useState([]);\n  const [displayedProduct, setDisplayedProduct] = useState(0);\n\n  const handleChoice = (id, action) => {\n    console.log(computedFeatures.avgLiked);\n    console.log(computedFeatures.avgDisliked);\n    console.log(id)\n    switch (action) {\n      case \"ADD_TO_LIKED_PRODUCTS\":\n        let nr = computedFeatures.nrOfLikeComputations;\n        let selectedProduct = products.filter((product) => product.id === id);\n\n        let x = selectedProduct[0].features[0];\n        let y = selectedProduct[0].features[1];\n\n        let newLikedX =\n          (nr / (nr + 1)) * computedFeatures.avgLiked[0] + (1 / (nr + 1)) * x;\n        let newLikedY =\n          (nr / (nr + 1)) * computedFeatures.avgLiked[1] + (1 / (nr + 1)) * y;\n\n        setLikedProducts([...likedProducts], selectedProduct[0]);\n        let cleanProducts = products.filter((product) => product.id != id);\n        setProducts(cleanProducts);\n\n        let minDist = 1000;\n        let minIdx = 0;\n        for (let i = 0; i < cleanProducts.length; i++) {\n          let runningDist =\n            (cleanProducts[i].features[0] - newLikedX) ** 2 +\n            (cleanProducts[i].features[1] - newLikedY) ** 2;\n\n          if (\n            computedFeatures.avgDisliked[0] != 0 &&\n            computedFeatures.avgDisliked[1] != 0\n          ) {\n            runningDist +=\n              -1 *\n              (cleanProducts[i].features[0] -\n                computedFeatures.avgDisliked[0]) **\n                2;\n            runningDist +=\n              -1 *\n              (cleanProducts[i].features[1] -\n                computedFeatures.avgDisliked[1]) **\n                2;\n          }\n\n          if (runningDist < minDist) {\n            minDist = runningDist;\n            minIdx = i;\n          }\n        }\n\n        computedFeatures.nrOfLikeComputations = nr + 1;\n        computedFeatures.avgLiked = [newLikedX, newLikedY];\n        setDisplayedProduct(cleanProducts[minIdx].id);\n\n        console.log(computedFeatures);\n        break;\n      case \"ADD_TO_DISLIKED_PRODUCTS\":\n        let nrDL = computedFeatures.nrOfDislikeComputations;\n        let selectedProductDL = products.filter((product) => product.id === id);\n\n        let xDL = selectedProductDL[0].features[0];\n        let yDL = selectedProductDL[0].features[1];\n\n        let newLikedXDL =\n          (nrDL / (nrDL + 1)) * computedFeatures.avgDisliked[0] +\n          (1 / (nrDL + 1)) * xDL;\n        let newLikedYDL =\n          (nrDL / (nrDL + 1)) * computedFeatures.avgDisliked[1] +\n          (1 / (nrDL + 1)) * yDL;\n\n        setLikedProducts([...dislikedProducts], selectedProductDL[0]);\n        let cleanProductsDL = products.filter((product) => product.id != id);\n        setProducts(cleanProductsDL);\n\n        let minDistDL = 1000;\n        let minIdxDL = 0;\n        for (let i = 0; i < cleanProductsDL.length; i++) {\n          let runningDistDL =\n            (cleanProductsDL[i].features[0] - computedFeatures.avgLiked[0]) ** 2 +\n            (cleanProductsDL[i].features[1] - computedFeatures.avgLiked[1]) ** 2;\n\n          if (\n            computedFeatures.avgDisliked[0] != 0 &&\n            computedFeatures.avgDisliked[1] != 0\n          ) {\n            runningDistDL +=\n              -1 *\n              (cleanProductsDL[i].features[0] -\n                computedFeatures.avgDisliked[0]) **\n                2;\n            runningDistDL +=\n              -1 *\n              (cleanProductsDL[i].features[1] -\n                computedFeatures.avgDisliked[1]) **\n                2;\n          } else {\n            computedFeatures.avgDisliked[0] = newLikedXDL\n            computedFeatures.avgDisliked[1] = newLikedYDL\n          }\n\n          if (runningDistDL < minDistDL) {\n            minDistDL = runningDistDL;\n            minIdxDL = i;\n          }\n        }\n\n        computedFeatures.nrOfDislikeComputations = nrDL + 1;\n        computedFeatures.avgDisliked = [newLikedXDL, newLikedYDL];\n        setDisplayedProduct(cleanProductsDL[minIdxDL].id);\n\n        break;\n      case \"ADD_TO_SUPERLIKED_PRODUCTS\":\n        // newLiked = (nr/(nr+3))*avgLiked + (3/(nr+3))*productFeats\n        // setlikedProducts = newLiked\n        // nrOfLikeComputations = +1\n        let nrSL = computedFeatures.nrOfLikeComputations;\n        let selectedProductSL = products.filter((product) => product.id === id);\n\n        let xSL = selectedProductSL[0].features[0];\n        let ySL = selectedProductSL[0].features[1];\n\n        let newLikedXSL =\n          (nrSL / (nrSL + 3)) * computedFeatures.avgLiked[0] +\n          (3 / (nrSL + 3)) * xSL;\n        let newLikedYSL =\n          (nrSL / (nrSL + 3)) * computedFeatures.avgLiked[1] +\n          (3 / (nrSL + 3)) * ySL;\n\n        setLikedProducts([...likedProducts], selectedProductSL[0]);\n        let cleanProductsSL = products.filter((product) => product.id != id);\n        setProducts(cleanProductsSL);\n\n        let minDistSL = 1000;\n        let minIdxSL = 0;\n        for (let i = 0; i < cleanProductsSL.length; i++) {\n          let runningDistSL =\n            (cleanProductsSL[i].features[0] - newLikedXSL) ** 2 +\n            (cleanProductsSL[i].features[1] - newLikedYSL) ** 2;\n\n          if (\n            computedFeatures.avgLiked[0] != 0 &&\n            computedFeatures.avgLiked[1] != 0\n          ) {\n            runningDistSL +=\n              -1 *\n              (cleanProductsSL[i].features[0] -\n                computedFeatures.avgLiked[0]) **\n                2;\n            runningDistSL +=\n              -1 *\n              (cleanProductsSL[i].features[1] -\n                computedFeatures.avgLiked[1]) **\n                2;\n          }\n\n          if (runningDistSL < minDistSL) {\n            minDistSL = runningDistSL;\n            minIdxSL = i;\n          }\n        }\n\n        computedFeatures.nrOfLikedComputations = nrSL + 1;\n        computedFeatures.avgLiked = [newLikedXSL, newLikedYSL];\n        setDisplayedProduct(cleanProductsSL[minIdxSL].id);\n        break;\n      default:\n        return null; //people;\n    }\n  };\n\n  return (\n    <div className=\"outer-wrap\">\n      <Card id={displayedProduct} handleChoice={handleChoice} />\n      <Bottom />\n    </div>\n  );\n};\n\nexport default Wrapper;\n"]},"metadata":{},"sourceType":"module"}