{"ast":null,"code":"var _jsxFileName = \"/home/christoph/Desktop/xdemo/src/components/Wrapper.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, setState } from \"react\";\nimport \"./Wrapper.css\";\nimport Card from \"./Card\";\nimport Bottom from \"./Bottom\";\nimport data from \"../data.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst computedFeatures = {\n  nrOfLikeComputations: 0,\n  nrOfDislikeComputations: 0,\n  avgLiked: [0, 0],\n  avgDisliked: [0, 0]\n};\n\nconst Wrapper = ({\n  flipCard\n}) => {\n  _s();\n\n  const [products, setProducts] = useState(data);\n  const [likedProducts, setLikedProducts] = useState([]);\n  const [dislikedProducts, setDislikedProducts] = useState([]);\n  const [displayedProduct, setDisplayedProduct] = useState(0);\n\n  const handleChoice = (id, action) => {\n    console.log(\"LIKED: \");\n    console.log(computedFeatures.avgLiked);\n    console.log(\"DISLIKED: \");\n    console.log(computedFeatures.avgDisliked);\n    console.log(id);\n\n    switch (action) {\n      case \"ADD_TO_LIKED_PRODUCTS\":\n        let nr = computedFeatures.nrOfLikeComputations;\n        let selectedProduct = products.filter(product => product.id === id);\n        let x = selectedProduct[0].features[0];\n        let y = selectedProduct[0].features[1];\n        let newLikedX = nr / (nr + 1) * computedFeatures.avgLiked[0] + 1 / (nr + 1) * x;\n        let newLikedY = nr / (nr + 1) * computedFeatures.avgLiked[1] + 1 / (nr + 1) * y;\n        setLikedProducts([...likedProducts], selectedProduct[0]);\n        let cleanProducts = products.filter(product => product.id != id);\n        setProducts(cleanProducts);\n        let minDist = 1000;\n        let minIdx = 0;\n\n        for (let i = 0; i < cleanProducts.length; i++) {\n          let runningDist = (cleanProducts[i].features[0] - newLikedX) ** 2 + (cleanProducts[i].features[1] - newLikedY) ** 2;\n\n          if (computedFeatures.avgDisliked[0] != 0 && computedFeatures.avgDisliked[1] != 0) {\n            runningDist += -0.3 * (cleanProducts[i].features[0] - computedFeatures.avgDisliked[0]) ** 2;\n            runningDist += -0.3 * (cleanProducts[i].features[1] - computedFeatures.avgDisliked[1]) ** 2;\n          }\n\n          if (runningDist < minDist) {\n            minDist = runningDist;\n            minIdx = i;\n          }\n        }\n\n        computedFeatures.nrOfLikeComputations = nr + 1;\n        computedFeatures.avgLiked = [newLikedX, newLikedY];\n        setDisplayedProduct(cleanProducts[minIdx].id);\n        console.log(computedFeatures);\n        break;\n\n      case \"ADD_TO_DISLIKED_PRODUCTS\":\n        let nrDL = computedFeatures.nrOfDislikeComputations;\n        let selectedProductDL = products.filter(product => product.id === id);\n        let xDL = selectedProductDL[0].features[0];\n        let yDL = selectedProductDL[0].features[1];\n        let newLikedXDL = nrDL / (nrDL + 1) * computedFeatures.avgDisliked[0] + 1 / (nrDL + 1) * xDL;\n        let newLikedYDL = nrDL / (nrDL + 1) * computedFeatures.avgDisliked[1] + 1 / (nrDL + 1) * yDL;\n        setLikedProducts([...dislikedProducts], selectedProductDL[0]);\n        let cleanProductsDL = products.filter(product => product.id != id);\n        setProducts(cleanProductsDL);\n        let minDistDL = 1000;\n        let minIdxDL = 0;\n\n        for (let i = 0; i < cleanProductsDL.length; i++) {\n          let runningDistDL = (cleanProductsDL[i].features[0] - computedFeatures.avgLiked[0]) ** 2 + (cleanProductsDL[i].features[1] - computedFeatures.avgLiked[1]) ** 2;\n\n          if (computedFeatures.avgDisliked[0] != 0 && computedFeatures.avgDisliked[1] != 0) {\n            runningDistDL += -0.3 * (cleanProductsDL[i].features[0] - computedFeatures.avgDisliked[0]) ** 2;\n            runningDistDL += -0.3 * (cleanProductsDL[i].features[1] - computedFeatures.avgDisliked[1]) ** 2;\n          } else {\n            computedFeatures.avgDisliked[0] = newLikedXDL;\n            computedFeatures.avgDisliked[1] = newLikedYDL;\n          }\n\n          if (runningDistDL < minDistDL) {\n            minDistDL = runningDistDL;\n            minIdxDL = i;\n          }\n        }\n\n        computedFeatures.nrOfDislikeComputations = nrDL + 1;\n        computedFeatures.avgDisliked = [newLikedXDL, newLikedYDL];\n        setDisplayedProduct(cleanProductsDL[minIdxDL].id);\n        break;\n\n      default:\n        return null;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"outer-wrap\",\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      id: displayedProduct,\n      handleChoice: handleChoice\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Bottom, {\n      flipCard: flipCard\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Wrapper, \"/iceErVN0VYqlfJFIrzxxNxMYXc=\");\n\n_c = Wrapper;\nexport default Wrapper;\n\nvar _c;\n\n$RefreshReg$(_c, \"Wrapper\");","map":{"version":3,"sources":["/home/christoph/Desktop/xdemo/src/components/Wrapper.js"],"names":["React","useState","setState","Card","Bottom","data","computedFeatures","nrOfLikeComputations","nrOfDislikeComputations","avgLiked","avgDisliked","Wrapper","flipCard","products","setProducts","likedProducts","setLikedProducts","dislikedProducts","setDislikedProducts","displayedProduct","setDisplayedProduct","handleChoice","id","action","console","log","nr","selectedProduct","filter","product","x","features","y","newLikedX","newLikedY","cleanProducts","minDist","minIdx","i","length","runningDist","nrDL","selectedProductDL","xDL","yDL","newLikedXDL","newLikedYDL","cleanProductsDL","minDistDL","minIdxDL","runningDistDL"],"mappings":"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","sourcesContent":["import React, { useState, setState } from \"react\";\nimport \"./Wrapper.css\";\nimport Card from \"./Card\";\nimport Bottom from \"./Bottom\";\nimport data from \"../data.json\";\n\nconst computedFeatures = {\n  nrOfLikeComputations: 0,\n  nrOfDislikeComputations: 0,\n  avgLiked: [0, 0],\n  avgDisliked: [0, 0],\n};\n\nconst Wrapper = ( {flipCard} ) => {\n  const [products, setProducts] = useState(data);\n  const [likedProducts, setLikedProducts] = useState([]);\n  const [dislikedProducts, setDislikedProducts] = useState([]);\n  const [displayedProduct, setDisplayedProduct] = useState(0);\n\n  const handleChoice = (id, action) => {\n    console.log(\"LIKED: \")\n    console.log(computedFeatures.avgLiked);\n    console.log(\"DISLIKED: \")\n    console.log(computedFeatures.avgDisliked);\n    console.log(id);\n    switch (action) {\n      case \"ADD_TO_LIKED_PRODUCTS\":\n        let nr = computedFeatures.nrOfLikeComputations;\n        let selectedProduct = products.filter((product) => product.id === id);\n\n        let x = selectedProduct[0].features[0];\n        let y = selectedProduct[0].features[1];\n\n        let newLikedX =\n          (nr / (nr + 1)) * computedFeatures.avgLiked[0] + (1 / (nr + 1)) * x;\n        let newLikedY =\n          (nr / (nr + 1)) * computedFeatures.avgLiked[1] + (1 / (nr + 1)) * y;\n\n        setLikedProducts([...likedProducts], selectedProduct[0]);\n        let cleanProducts = products.filter((product) => product.id != id);\n        setProducts(cleanProducts);\n\n        let minDist = 1000;\n        let minIdx = 0;\n        for (let i = 0; i < cleanProducts.length; i++) {\n          let runningDist =\n            (cleanProducts[i].features[0] - newLikedX) ** 2 +\n            (cleanProducts[i].features[1] - newLikedY) ** 2;\n\n          if (\n            computedFeatures.avgDisliked[0] != 0 &&\n            computedFeatures.avgDisliked[1] != 0\n          ) {\n            runningDist +=\n              -0.3 *\n              (cleanProducts[i].features[0] -\n                computedFeatures.avgDisliked[0]) **\n                2;\n            runningDist +=\n              -0.3 *\n              (cleanProducts[i].features[1] -\n                computedFeatures.avgDisliked[1]) **\n                2;\n          }\n\n          if (runningDist < minDist) {\n            minDist = runningDist;\n            minIdx = i;\n          }\n        }\n\n        computedFeatures.nrOfLikeComputations = nr + 1;\n        computedFeatures.avgLiked = [newLikedX, newLikedY];\n        setDisplayedProduct(cleanProducts[minIdx].id);\n\n        console.log(computedFeatures);\n        break;\n      case \"ADD_TO_DISLIKED_PRODUCTS\":\n        let nrDL = computedFeatures.nrOfDislikeComputations;\n        let selectedProductDL = products.filter((product) => product.id === id);\n\n        let xDL = selectedProductDL[0].features[0];\n        let yDL = selectedProductDL[0].features[1];\n\n        let newLikedXDL =\n          (nrDL / (nrDL + 1)) * computedFeatures.avgDisliked[0] +\n          (1 / (nrDL + 1)) * xDL;\n        let newLikedYDL =\n          (nrDL / (nrDL + 1)) * computedFeatures.avgDisliked[1] +\n          (1 / (nrDL + 1)) * yDL;\n\n        setLikedProducts([...dislikedProducts], selectedProductDL[0]);\n        let cleanProductsDL = products.filter((product) => product.id != id);\n        setProducts(cleanProductsDL);\n\n        let minDistDL = 1000;\n        let minIdxDL = 0;\n        for (let i = 0; i < cleanProductsDL.length; i++) {\n          let runningDistDL =\n            (cleanProductsDL[i].features[0] - computedFeatures.avgLiked[0]) **\n              2 +\n            (cleanProductsDL[i].features[1] - computedFeatures.avgLiked[1]) **\n              2;\n\n          if (\n            computedFeatures.avgDisliked[0] != 0 &&\n            computedFeatures.avgDisliked[1] != 0\n          ) {\n            runningDistDL +=\n              -0.3 *\n              (cleanProductsDL[i].features[0] -\n                computedFeatures.avgDisliked[0]) **\n                2;\n            runningDistDL +=\n              -0.3 *\n              (cleanProductsDL[i].features[1] -\n                computedFeatures.avgDisliked[1]) **\n                2;\n          } else {\n            computedFeatures.avgDisliked[0] = newLikedXDL;\n            computedFeatures.avgDisliked[1] = newLikedYDL;\n          }\n\n          if (runningDistDL < minDistDL) {\n            minDistDL = runningDistDL;\n            minIdxDL = i;\n          }\n        }\n\n        computedFeatures.nrOfDislikeComputations = nrDL + 1;\n        computedFeatures.avgDisliked = [newLikedXDL, newLikedYDL];\n        setDisplayedProduct(cleanProductsDL[minIdxDL].id);\n\n        break;\n      \n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"outer-wrap\">\n        <Card id={displayedProduct} handleChoice={handleChoice} />\n        <Bottom flipCard={flipCard}/>\n    </div>\n  );\n};\n\nexport default Wrapper;\n"]},"metadata":{},"sourceType":"module"}